import { useState, useEffect } from 'react';

export type Language = 'en' | 'es' | 'pt';

const translations = {
    en: {
        profile: 'Profile',
        editProfile: 'Edit Profile',
        security: 'Security',
        main: 'Main',
        personalInfo: 'Personal Info',
        analytics: 'Analytics',
        dataOps: 'Data Operations',
        exportMd: 'Export .MD',
        importMd: 'Import .MD',
        localBackup: 'Local Backup',
        restoreNotes: 'Restore Notes',
        savedNotes: 'Saved Notes',
        categories: 'Categories',
        accountSettings: 'Account Settings',
        nameEmailBio: 'Name, Email, Bio',
        pinBiometrics: 'PIN & Biometrics',
        updateProfile: 'Update Profile',
        fullName: 'Full Display Name',
        email: 'Email Address',
        bio: 'Personal Bio',
        masterPin: 'Master PIN',
        pinDesc: 'Protect your locked notes with a global secure PIN.',
        changePin: 'Change PIN',
        biometricLock: 'Biometric Lock',
        biometricDesc: 'Use FaceID or Fingerprint authentication.',
        back: 'Back',
        search: 'Search notes...',
        createNote: 'Create Note',
        noNotes: 'No notes found',
        deleteNote: 'Delete Note',
        archiveNote: 'Archive Note',
        pinNote: 'Pin Note',
        unpinNote: 'Unpin Note',
        editMode: 'Edit',
        viewMode: 'View',
        save: 'Save',
        cancel: 'Cancel',
        title: 'Title',
        content: 'Write something...',
        home: 'Home',
        settings: 'Settings',
        allNotes: 'All Notes',
        archived: 'Archived',
        favorites: 'Favorites',
        appearance: 'Appearance',
        language: 'Language'
    },
    es: {
        profile: 'Perfil',
        editProfile: 'Editar Perfil',
        security: 'Seguridad',
        main: 'Principal',
        personalInfo: 'Información Personal',
        analytics: 'Estadísticas',
        dataOps: 'Operaciones de Datos',
        exportMd: 'Exportar .MD',
        importMd: 'Importar .MD',
        localBackup: 'Respaldo Local',
        restoreNotes: 'Restaurar Notas',
        savedNotes: 'Notas Guardadas',
        categories: 'Categorías',
        accountSettings: 'Ajustes de Cuenta',
        nameEmailBio: 'Nombre, Correo, Bio',
        pinBiometrics: 'PIN y Biometría',
        updateProfile: 'Actualizar Perfil',
        fullName: 'Nombre Completo',
        email: 'Dirección de Correo',
        bio: 'Biografía Personal',
        masterPin: 'PIN Maestro',
        pinDesc: 'Protege tus notas bloqueadas con un PIN global.',
        changePin: 'Cambiar PIN',
        biometricLock: 'Bloqueo Biométrico',
        biometricDesc: 'Usa FaceID o Huella dactilar.',
        back: 'Volver',
        search: 'Buscar notas...',
        createNote: 'Crear Nota',
        noNotes: 'No se encontraron notas',
        deleteNote: 'Eliminar Nota',
        archiveNote: 'Archivar Nota',
        pinNote: 'Fijar Nota',
        unpinNote: 'Desfijar Nota',
        editMode: 'Editar',
        viewMode: 'Ver',
        save: 'Guardar',
        cancel: 'Cancelar',
        title: 'Título',
        content: 'Escribe algo...',
        home: 'Inicio',
        settings: 'Ajustes',
        allNotes: 'Todas las Notas',
        archived: 'Archivadas',
        favorites: 'Favoritas',
        appearance: 'Apariencia',
        language: 'Idioma'
    },
    pt: {
        profile: 'Perfil',
        editProfile: 'Editar Perfil',
        security: 'Segurança',
        main: 'Principal',
        personalInfo: 'Informações Pessoais',
        analytics: 'Estatísticas',
        dataOps: 'Operações de Dados',
        exportMd: 'Exportar .MD',
        importMd: 'Importar .MD',
        localBackup: 'Backup Local',
        restoreNotes: 'Restaurar Notas',
        savedNotes: 'Notas Salvas',
        categories: 'Categorias',
        accountSettings: 'Configurações de Conta',
        nameEmailBio: 'Nome, E-mail, Bio',
        pinBiometrics: 'PIN e Biometria',
        updateProfile: 'Atualizar Perfil',
        fullName: 'Nome Completo',
        email: 'Endereço de E-mail',
        bio: 'Biografia Pessoal',
        masterPin: 'PIN Mestre',
        pinDesc: 'Proteja suas notas bloqueadas com um PIN global.',
        changePin: 'Alterar PIN',
        biometricLock: 'Bloqueio Biométrico',
        biometricDesc: 'Use FaceID ou Impressão digital.',
        back: 'Voltar',
        search: 'Buscar notas...',
        createNote: 'Criar Nota',
        noNotes: 'Nenhuma nota encontrada',
        deleteNote: 'Excluir Nota',
        archiveNote: 'Arquivar Nota',
        pinNote: 'Fixar Nota',
        unpinNote: 'Desafixar Nota',
        editMode: 'Editar',
        viewMode: 'Visualizar',
        save: 'Salvar',
        cancel: 'Cancelar',
        title: 'Título',
        content: 'Escreva algo...',
        home: 'Início',
        settings: 'Configurações',
        allNotes: 'Todas as Notas',
        archived: 'Arquivadas',
        favorites: 'Favoritas',
        appearance: 'Aparência',
        language: 'Idioma'
    }
} as const;

export type TranslationKeys = keyof typeof translations.en;

export const useI18n = () => {
    const [lang, setLang] = useState<Language>(() => {
        const saved = localStorage.getItem('vitreon_lang');
        return (saved as Language) || 'en';
    });

    useEffect(() => {
        localStorage.setItem('vitreon_lang', lang);
    }, [lang]);

    const t = (key: TranslationKeys): string => {
        return translations[lang][key] || translations.en[key] || key;
    };

    return { t, lang, setLang };
};
